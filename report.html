<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Issue - EcoVision Waste Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .animated-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: gradientBG 15s ease-in-out infinite;
            opacity: 0.8;
        }

        h1,
        h2,
        h3,
        .font-heading {
            font-family: 'Poppins', sans-serif;
        }

        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-emerald-50 min-h-screen font-sans text-gray-800">
    <!-- Sticky Header -->
    <header id="main-navbar"
        class="sticky top-0 z-30 bg-white/20 backdrop-blur-xl border-b border-white/30 transition-all duration-500">
        <div class="w-full flex items-center justify-between px-6 py-4">
            <div class="flex items-center gap-6">
                <div class="relative">
                    <img src="image3.webp" alt="Clean and Healthy Area Logo"
                        class="h-14 w-14 rounded-2xl object-cover border-4 border-white/30 shadow-2xl" />
                    <div
                        class="absolute -inset-1 bg-gradient-to-r from-emerald-400 to-blue-500 rounded-2xl blur opacity-30">
                    </div>
                </div>
                <div class="flex flex-col justify-center">
                    <span class="text-2xl font-black text-gray-800 tracking-wide font-heading">Clean and Healthy
                        Area</span>
                    <span class="text-gray-600 text-base font-semibold leading-tight">Report Waste Issue</span>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <nav
                    class="flex items-center gap-8 px-8 py-4 rounded-3xl bg-white/20 backdrop-blur-xl shadow-xl border border-white/30">
                    <a href="index.html"
                        class="font-semibold text-lg text-gray-800 hover:text-emerald-600 transition-all duration-300 relative group">
                        Home
                        <span
                            class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="report.html"
                        class="font-semibold text-lg text-gray-800 hover:text-emerald-600 transition-all duration-300 relative group">
                        Report
                        <span
                            class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="index.html#dashboard-section"
                        class="font-semibold text-lg text-gray-800 hover:text-emerald-600 transition-all duration-300 relative group">
                        Dashboard
                        <span
                            class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="index.html#about"
                        class="font-semibold text-lg text-gray-800 hover:text-emerald-600 transition-all duration-300 relative group">
                        About
                        <span
                            class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="index.html#contact"
                        class="font-semibold text-lg text-gray-800 hover:text-emerald-600 transition-all duration-300 relative group">
                        Contact
                        <span
                            class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-emerald-500 to-blue-500 transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <style>
        .drop-shadow-glow {
            filter: drop-shadow(0 0 12px #a7f3d0) drop-shadow(0 0 4px #22d3ee);
        }

        @media (prefers-color-scheme: dark) {
            .bg-white\/60 {
                background: rgba(20, 20, 20, 0.7) !important;
            }

            #main-navbar {
                background: transparent !important;
            }

            .drop-shadow-glow {
                filter: drop-shadow(0 0 16px #ef4444) drop-shadow(0 0 8px #fff);
            }
        }
    </style>

    <!-- Report Form Section -->
    <section class="max-w-5xl mx-auto mt-8 px-6 py-8">
        <!-- Header with gradient background -->
        <div
            class="bg-gradient-to-r from-emerald-400 via-blue-400 to-emerald-500 rounded-3xl shadow-2xl p-8 mb-8 text-center">
            <div class="bg-white/20 backdrop-blur-xl rounded-3xl p-8">
                <h1 class="text-6xl font-black text-white mb-6 font-heading drop-shadow-2xl">
                    <i class="fa-solid fa-flag mr-6"></i>
                    Report Waste Issue
                </h1>
                <p class="text-white/90 text-2xl mb-4">Help us keep our community clean and healthy</p>
                <p class="text-white/80 text-xl">Your report makes a difference in our environment</p>
                <div class="flex justify-center gap-8 mt-8">
                    <div class="flex items-center text-white/90 bg-white/10 backdrop-blur-sm px-6 py-3 rounded-2xl">
                        <i class="fa-solid fa-clock mr-3 text-2xl"></i>
                        <span class="text-lg font-semibold">Quick & Easy</span>
                    </div>
                    <div class="flex items-center text-white/90 bg-white/10 backdrop-blur-sm px-6 py-3 rounded-2xl">
                        <i class="fa-solid fa-shield-alt mr-3 text-2xl"></i>
                        <span class="text-lg font-semibold">Secure & Private</span>
                    </div>
                    <div class="flex items-center text-white/90 bg-white/10 backdrop-blur-sm px-6 py-3 rounded-2xl">
                        <i class="fa-solid fa-bolt mr-3 text-2xl"></i>
                        <span class="text-lg font-semibold">Fast Response</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white/20 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/30 p-8">
            <form id="report-form" class="space-y-8">
                <!-- Basic Information Section -->
                <div
                    class="bg-gradient-to-r from-blue-50/80 to-emerald-50/80 backdrop-blur-sm rounded-3xl p-8 border border-white/50">
                    <h2 class="text-3xl font-black text-gray-800 mb-8 flex items-center font-heading">
                        <i class="fa-solid fa-info-circle text-blue-600 mr-4 text-3xl"></i>
                        Basic Information
                    </h2>

                    <!-- Location -->
                    <div class="mb-8">
                        <label for="location" class="block text-xl font-bold text-gray-800 mb-4">
                            <i class="fa-solid fa-map-marker-alt text-emerald-600 mr-3"></i>
                            Location *
                        </label>
                        <div id="map" style="height: 400px;">
                        </div>
                        <button onclick="goToCurrentLocation()"
                            style="margin-top: 5px; z-index: 1000; padding: 8px 12px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            üìç My Location
                        </button>

                        <button onclick="openInGoogleMaps()"
                            style="margin-top: 5px; z-index: 1000; padding: 8px 12px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">üåç
                            Open in Google Maps</button>

                        <input type="hidden" id="latitude" name="latitude" />
                        <input type="hidden" id="longitude" name="longitude" />


                    </div>

                    <!-- Type of Report -->
                    <div class="mb-8">
                        <label for="report-type" class="block text-xl font-bold text-gray-800 mb-4">
                            <i class="fa-solid fa-tag text-emerald-600 mr-3"></i>
                            Type of Report *
                        </label>
                        <select id="report-type" name="report-type" required
                            class="w-full px-6 py-5 rounded-2xl border-2 border-blue-200 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-200 transition-all duration-300 bg-white/80 backdrop-blur-sm text-gray-800 text-lg">
                            <option value="">Select report type</option>
                            <option value="garbage">üóëÔ∏è Garbage/Waste Collection</option>
                            <option value="animal-death">üíî Animal Death/Injury</option>
                            <option value="animal-adopt">üè† Animal Adoption</option>
                            <option value="animal-care">üêæ Animal Care/Rescue</option>
                            <option value="cleaning">üßπ Cleaning Request</option>
                            <option value="recycling">‚ôªÔ∏è Recycling Issue</option>
                            <option value="hazardous">‚ö†Ô∏è Hazardous Waste</option>
                            <option value="other">üìã Other</option>
                        </select>
                    </div>
                </div>

                <!-- Detailed Information Section -->
                <div
                    class="bg-gradient-to-r from-emerald-50/80 to-blue-50/80 backdrop-blur-sm rounded-3xl p-8 border border-white/50">
                    <h2 class="text-3xl font-black text-gray-800 mb-8 flex items-center font-heading">
                        <i class="fa-solid fa-file-alt text-emerald-600 mr-4 text-3xl"></i>
                        Detailed Information
                    </h2>

                    <!-- Description -->
                    <div class="mb-8">
                        <label for="description" class="block text-xl font-bold text-gray-800 mb-4">
                            <i class="fa-solid fa-comment text-emerald-600 mr-3"></i>
                            Description *
                        </label>
                        <textarea id="description" name="description" required minlength="10" maxlength="300" rows="4"
                            placeholder="Describe the issue in detail. Include specific details about the problem, size, impact, and any relevant observations..."
                            class="w-full px-6 py-5 rounded-2xl border-2 border-blue-200 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-200 transition-all duration-300 bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-500 resize-none text-lg"
                            aria-describedby="description-help"></textarea>
                        <div class="flex justify-between items-center mt-3">
                            <p id="description-help" class="text-sm text-gray-600 flex items-center">
                                <i class="fa-solid fa-info-circle text-blue-500 mr-2"></i>
                                Minimum 10 characters, maximum 300 characters
                            </p>
                            <span id="char-count" class="text-sm text-gray-500 font-semibold">0/300</span>
                        </div>
                    </div>

                    <!-- Estimated Size -->
                    <div class="mb-8">
                        <label for="size" class="block text-xl font-bold text-gray-800 mb-4">
                            <i class="fa-solid fa-ruler text-emerald-600 mr-3"></i>
                            Estimated Size
                        </label>
                        <select id="size" name="size"
                            class="w-full px-6 py-5 rounded-2xl border-2 border-blue-200 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-200 transition-all duration-300 bg-white/80 backdrop-blur-sm text-gray-800 text-lg">
                            <option value="">Select size (optional)</option>
                            <option value="small">üìè Small - Less than 1 meter</option>
                            <option value="medium">üìê Medium - 1-3 meters</option>
                            <option value="large">üìè Large - 3-10 meters</option>
                            <option value="very-large">üìê Very Large - More than 10 meters</option>
                        </select>
                    </div>

                    <!-- Accessibility -->
                    <div class="mb-8">
                        <label for="accessibility" class="block text-xl font-bold text-gray-800 mb-4">
                            <i class="fa-solid fa-road text-emerald-600 mr-3"></i>
                            Accessibility
                        </label>
                        <select id="accessibility" name="accessibility"
                            class="w-full px-6 py-5 rounded-2xl border-2 border-blue-200 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-200 transition-all duration-300 bg-white/80 backdrop-blur-sm text-gray-800 text-lg">
                            <option value="">Select accessibility (optional)</option>
                            <option value="easy">üöó Easy - Vehicle accessible</option>
                            <option value="moderate">üö∂ Moderate - Walking distance</option>
                            <option value="difficult">üèîÔ∏è Difficult - Hard to reach</option>
                            <option value="restricted">üö´ Restricted - Limited access</option>
                        </select>
                    </div>
                </div>

                <!-- Contact Information Section -->
                <div
                    class="bg-gradient-to-r from-blue-50/80 to-purple-50/80 backdrop-blur-sm rounded-3xl p-8 border border-white/50">
                    <h2 class="text-3xl font-black text-gray-800 mb-8 flex items-center font-heading">
                        <i class="fa-solid fa-user text-blue-600 mr-4 text-3xl"></i>
                        Contact Information (Optional)
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label for="name" class="block text-xl font-bold text-gray-800 mb-4">
                                <i class="fa-solid fa-user text-blue-600 mr-3"></i>
                                Your Name
                            </label>
                            <input type="text" id="name" name="name" maxlength="50"
                                placeholder="Enter your name (optional)"
                                class="w-full px-6 py-5 rounded-2xl border-2 border-blue-200 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-200 transition-all duration-300 bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-500 text-lg">
                        </div>

                        <div>
                            <label for="phone" class="block text-xl font-bold text-gray-800 mb-4">
                                <i class="fa-solid fa-phone text-blue-600 mr-3"></i>
                                Phone Number
                            </label>
                            <input type="tel" id="phone" name="phone" pattern="[0-9]{10,15}"
                                placeholder="Enter phone number (optional)"
                                class="w-full px-6 py-5 rounded-2xl border-2 border-blue-200 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-200 transition-all duration-300 bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-500 text-lg">
                        </div>
                    </div>
                </div>

                <!-- Image Upload Section -->
                <div
                    class="bg-gradient-to-r from-purple-50/80 to-pink-50/80 backdrop-blur-sm rounded-3xl p-8 border border-white/50">
                    <h2 class="text-3xl font-black text-gray-800 mb-8 flex items-center font-heading">
                        <i class="fa-solid fa-camera text-purple-600 mr-4 text-3xl"></i>
                        Visual Evidence *
                    </h2>

                    <div
                        class="border-2 border-dashed border-purple-300 rounded-3xl p-12 text-center hover:border-emerald-400 transition-all duration-300 bg-white/60 backdrop-blur-sm">
                        <input type="file" id="image" name="image" accept="image/jpeg,image/png" required
                            class="hidden">
                        <div id="upload-area" class="cursor-pointer">
                            <i class="fa-solid fa-cloud-upload-alt text-8xl text-purple-400 mb-8"></i>
                            <p class="text-gray-700 text-2xl mb-4 font-bold">Click to upload or drag and drop</p>
                            <p class="text-gray-500 mb-6 text-lg">JPEG, PNG up to 5MB *</p>
                            <div class="flex justify-center gap-6 text-lg text-gray-600">
                                <span class="bg-white/80 backdrop-blur-sm px-4 py-2 rounded-xl"><i
                                        class="fa-solid fa-check text-green-500 mr-2"></i>High quality images</span>
                                <span class="bg-white/80 backdrop-blur-sm px-4 py-2 rounded-xl"><i
                                        class="fa-solid fa-check text-green-500 mr-2"></i>Multiple angles</span>
                                <span class="bg-white/80 backdrop-blur-sm px-4 py-2 rounded-xl"><i
                                        class="fa-solid fa-check text-green-500 mr-2"></i>Clear visibility</span>
                            </div>
                        </div>
                        <div id="image-preview" class="hidden mt-8">
                            <img id="preview-img" class="max-w-md mx-auto rounded-3xl shadow-2xl">
                            <button type="button" id="remove-image"
                                class="mt-6 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl hover:from-red-600 hover:to-red-700 transition-all duration-300 font-bold text-lg shadow-lg hover:shadow-xl">
                                <i class="fa-solid fa-trash mr-3"></i>Remove Image
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="text-center pt-8">
                    <div
                        class="bg-gradient-to-r from-emerald-50/80 to-green-50/80 backdrop-blur-sm rounded-3xl p-8 border border-white/50 mb-8">
                        <h3 class="text-2xl font-black text-gray-800 mb-6 font-heading">Ready to Submit?</h3>
                        <p class="text-gray-600 mb-6 text-lg">Your report will be reviewed and processed within 24-48
                            hours</p>
                        <div class="flex justify-center gap-8 text-lg text-gray-600">
                            <span class="bg-white/80 backdrop-blur-sm px-6 py-3 rounded-2xl"><i
                                    class="fa-solid fa-shield-alt text-emerald-500 mr-2"></i>Secure submission</span>
                            <span class="bg-white/80 backdrop-blur-sm px-6 py-3 rounded-2xl"><i
                                    class="fa-solid fa-clock text-emerald-500 mr-2"></i>Quick processing</span>
                            <span class="bg-white/80 backdrop-blur-sm px-6 py-3 rounded-2xl"><i
                                    class="fa-solid fa-bell text-emerald-500 mr-2"></i>Status updates</span>
                        </div>
                    </div>

                    <button type="submit"
                        class="px-16 py-6 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white font-black text-2xl rounded-3xl shadow-2xl hover:from-emerald-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-300 focus:ring-4 focus:ring-emerald-200 hover:shadow-3xl">
                        <i class="fa-solid fa-paper-plane mr-4"></i>
                        Submit Report
                    </button>
                </div>
            </form>
        </div>
    </section>

    <!-- Enhanced Loading Modal -->
    <div id="loading-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50 flex items-center justify-center">
        <div class="bg-white/20 backdrop-blur-xl rounded-3xl p-8 text-center shadow-2xl border border-white/30">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-6"></div>
            <p class="text-gray-700 font-bold text-xl">Submitting your report...</p>
        </div>
    </div>

    <!-- Enhanced Success/Error Modal -->
    <div id="result-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50 flex items-center justify-center">
        <div
            class="bg-white/20 backdrop-blur-xl rounded-3xl p-8 text-center shadow-2xl max-w-md mx-4 border border-white/30">
            <div id="modal-icon" class="text-8xl mb-6"></div>
            <h3 id="modal-title" class="text-3xl font-black mb-4 font-heading"></h3>
            <p id="modal-message" class="text-gray-600 mb-8 text-lg"></p>
            <button id="modal-close"
                class="px-8 py-4 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white font-bold rounded-2xl hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl">
                Continue
            </button>
        </div>
    </div>

    <script src="report.js"></script>
    <script>
        // Navbar scroll effect
        let lastScrollTop = 0;
        const navbar = document.getElementById('main-navbar');

        window.addEventListener('scroll', function () {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (scrollTop > lastScrollTop && scrollTop > 100) {
                // Scrolling down - hide navbar
                navbar.style.transform = 'translateY(-100%)';
                navbar.style.transition = 'transform 0.3s ease-in-out';
            } else {
                // Scrolling up - show navbar
                navbar.style.transform = 'translateY(0)';
                navbar.style.transition = 'transform 0.3s ease-in-out';
            }

            lastScrollTop = scrollTop;
        });
    </script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        let currentLat = 28.6139;
        let currentLng = 77.2090;

        const map = L.map('map').setView([currentLat, currentLng], 13); // Default: Delhi
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        let marker;

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async position => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;

                const locationName = await reverseGeocode(lat, lng); // ‚úÖ wait here

                map.setView([lat, lng], 15);

                if (marker) {
                    marker.setLatLng([lat, lng]).bindPopup(locationName).openPopup();
                } else {
                    marker = L.marker([lat, lng]).addTo(map).bindPopup(locationName).openPopup();
                }

                document.getElementById('latitude').value = lat;
                document.getElementById('longitude').value = lng;

            }, err => {
                console.error("Geolocation Error:", err);
            });
        }

        else {
            console.warn("Geolocation not supported by this browser.");
        }

        map.on('click', async function (e) {
            const lat = e.latlng.lat;
            const lng = e.latlng.lng;

            const locationName = await reverseGeocode(lat, lng);

            if (marker) {
                marker.setLatLng([lat, lng]).bindPopup(locationName).openPopup();
            } else {
                marker = L.marker([lat, lng]).addTo(map).bindPopup(locationName).openPopup();
            }

            document.getElementById('latitude').value = lat;
            document.getElementById('longitude').value = lng;
        });


        function goToCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async position => {
                    const currentLat = position.coords.latitude;
                    const currentLng = position.coords.longitude;

                    map.setView([currentLat, currentLng], 15);

                    const locationName = await reverseGeocode(currentLat, currentLng); // ‚úÖ use correct vars

                    if (marker) {
                        marker.setLatLng([currentLat, currentLng]).bindPopup(locationName).openPopup();
                    } else {
                        marker = L.marker([currentLat, currentLng]).addTo(map).bindPopup(locationName).openPopup();
                    }

                    document.getElementById('latitude').value = currentLat;
                    document.getElementById('longitude').value = currentLng;
                }, err => {
                    console.error("Geolocation error:", err);
                });
            } else {
                console.warn("Geolocation not supported by this browser.");
            }
        }


        async function reverseGeocode(lat, lng) {
            try {
                const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lng}`);
                const data = await res.json();
                const locationName = data.display_name;

                document.getElementById('map').value = locationName;
                return locationName;

            } catch (err) {
                console.error("Reverse Geocoding Error:", err);
                return "Unknown location";
            }
        }

        function openInGoogleMaps() {
            const lat = document.getElementById('latitude').value;
            const lng = document.getElementById('longitude').value;

            if (lat && lng) {
                const url = `https://www.google.com/maps?q=${lat},${lng}`;
                window.open(url, '_blank');
            } else {
                alert("Location not available. Please select or fetch a location first.");
            }
        }


    </script>


</body>

</html>